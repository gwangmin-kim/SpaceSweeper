## [2026-01-08] 구현 내용

### 🎯 목표
- 폐기물 파괴 시 로직 구현
- 자원 파편 수집 매커니즘 구현 완료: 플레이어 주체
- 샷건 및 레이저 건 공격 매커니즘 구현
- 시각적 톤 구체적으로 구상: 도트 vs 캐주얼
- 임시 에셋(스프라이트 등) 구비

### ✅ 진행 상황
- [x] `SpaceDebris` (`SpaceFloatingObject`에서 이름 변경): `Die` 메서드 구현. 폐기물 파괴 시 정해진 만큼 자원 파편이 드롭되고 해당 폐기물 오브젝트는 파괴. 미리 정해진 카운트 만큼 자원 파편을 생성. 추후 플레이어의 업그레이드 항목에 따라 확률적으로 혹은 배율을 적용하여 드롭 개수 조정 가능하게 변경할 예정.
- [x] `ResourceItem`: 자원 파편 클래스. `SpaceDebris`에 의해 생성되면 최소 시간 동안 터져 나오는 효과가 만들어지고, 이후 제자리에서 회전하며 부유. 타겟(플레이어)이 정해지면 해당 방향으로 끌려가며, 이는 타겟이 정해진 시점의 거리에서 최소이다가, 가까워질 수록 빨라짐. 플레이어와 충돌할 경우 파괴됨. 내부에 `_value` 파라미터가 있으며, 추후 `ResourceManager` 구현을 통해 수집한 자원량을 추적하도록 구현할 예정.
- [x] `SpacePlayerMagnet`: 자원 파편이 콜라이더(트리거) 범위 내로 들어올 경우, 해당 파편에게 플레이어 위치를 알려줌. (타겟 지정)
- [ ] 샷건 및 레이저 건 공격 매커니즘 구현
- [ ] 시각적 톤 구체적으로 구상: 도트 vs 캐주얼
- [ ] 임시 에셋(스프라이트 등) 구비

### 🚀 트러블 슈팅

**문제 상황:** 자원 파편이 플레이어의 자력 범위(MagnetArea, 자식 오브젝트)에 들어오는 순간, 플레이어 본체에 닿기도 전에 즉시 획득(파괴)되는 현상이 발생함.

- **원인:** 플레이어 루트 오브젝트(`SpacePlayerController`)에 구현된 `OnTriggerEnter2D`가 자식 오브젝트인 MagnetArea의 Trigger 충돌 이벤트까지 함께 수신했기 때문 (Unity의 Compound Collider 동작 방식).
- 이로 인해 자석 범위에 닿는 이벤트가 발생하자마자 획득 로직이 실행되어, 아이템이 끌려오는 연출 없이 바로 사라짐.

**시도한 방법:**

1. **플레이어 스크립트에서 충돌체 구분 (OnTriggerStay2D):**
    - 플레이어 스크립트 내에서 `OnTriggerStay2D`를 사용하여, 현재 충돌 중인 콜라이더가 플레이어의 본체 캡슐 콜라이더인지 `IsTouching()` 함수로 매 프레임 검사하려 했음.
    - **판단:** 자원 파편의 개수가 많아질 경우 매 프레임 호출되는 `Stay` 함수와 `IsTouching` 연산이 심각한 성능 저하를 유발할 수 있어 기각함.

**해결:**

- **충돌 감지 주체를 '플레이어'에서 '자원 파편'으로 변경**
- 플레이어의 비대해진 로직을 덜어내고, `ResourceItem` 스크립트 내부에 `OnTriggerEnter2D`를 구현함.
- 이미 잘 분리해둔 Layer 시스템을 활용하여, 충돌한 대상의 레이어가 `Player`(본체)일 때만 획득 로직을 수행하고, `Magnet`(자석 범위)일 때는 무시하도록 처리.
- **성과:** 불필요한 연산 비용(매 프레임 검사)을 제거하고, 이벤트 기반으로 정확한 시점에 한 번만 로직이 실행되도록 최적화함.

### 📝 내일 할 일
- 샷건 및 레이저 건 공격 매커니즘 구현
- 시각적 톤 구체적으로 구상: 도트 vs 캐주얼
- 임시 에셋(스프라이트 등) 구비
- 산소 타이머 및 사망/귀환 로직, 기초 UI 구현